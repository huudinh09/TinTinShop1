(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[99],{ePid:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return D}));var r=n("etRO"),o=n("4jfz"),i=n("mHfP"),c=n("1U+3"),a=n("DY1Z"),s=n("mXGw"),u=n.n(s),l=n("slGX"),p=n("a1Hr"),d=n("5UAf"),f=n("y1FF"),v=n("zjXh"),m=n("Jzau"),y=n("IF/j"),h=n("7IP4"),b=n.n(h),g=n("/m4v"),j=n("edSL"),O=n.n(j);function w(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var o=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var I=function(t){Object(i.a)(n,t);var e=w(n);function n(){var t;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).state={onload:!1},t.getUserLocation=function(){try{var t=JSON.parse(localStorage.getItem("delivery-zone"));return{user_current_city:O()(t,"data.region",""),user_current_district:O()(t,"data.district",""),user_current_province:O()(t,"data.ward","")}}catch(e){return console.log(e,""),null}},t}return Object(o.a)(n,[{key:"initScript",value:function(){try{if("undefined"===typeof this.props.userId||window.amplitude)return;var t="b81b93059a9ae4ff8f602963ebf6c438";"tiki.vn"===location.hostname&&(t="99d374f67220dcf1643e35409ff9b91e");var e=document.createElement("script");e.textContent='\nconsole.log(\'init amplitude 7.1.0\');\n(function(e,t){var n=e.amplitude||{_q:[],_iq:{}};var r=t.createElement("script")\n;r.type="text/javascript"\n;r.integrity="sha384-cukXwabQy+j/QA1+RqiXSzxhgQg5Rrn3zVszlwH3pWj/bXJxlA8Ge7NhcD6vP2Ik"\n;r.crossOrigin="anonymous";r.async=true\n;r.src="https://cdn.amplitude.com/libs/amplitude-7.1.0-min.gz.js"\n;r.onload=function(){if(!e.amplitude.runQueuedFunctions){\nconsole.log("[Amplitude] Error: could not load SDK")}}\n;var i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)\n;function s(e,t){e.prototype[t]=function(){\nthis._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}\nvar o=function(){this._q=[];return this}\n;var a=["add","append","clearAll","prepend","set","setOnce","unset"]\n;for(var c=0;c<a.length;c++){s(o,a[c])}n.Identify=o;var u=function(){this._q=[]\n;return this}\n;var l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"]\n;for(var p=0;p<l.length;p++){s(u,l[p])}n.Revenue=u\n;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"]\n;function v(e){function t(t){e[t]=function(){\ne._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}\nfor(var n=0;n<d.length;n++){t(d[n])}}v(n);n.getInstance=function(e){\ne=(!e||e.length===0?"$default_instance":e).toLowerCase()\n;if(!n._iq.hasOwnProperty(e)){n._iq[e]={_q:[]};v(n._iq[e])}return n._iq[e]}\n;e.amplitude=n})(window,document);\n\n\namplitude.getInstance().init("'.concat(t,'");\n').concat(0!==this.props.userId?"amplitude.getInstance().setUserId('".concat(this.props.userId,"');"):"","\n"),e.async=!0,document.body.appendChild(e);var n=this.getUserLocation();n&&amplitude.getInstance().setUserProperties(n)}catch(r){console.log(r)}}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("load",(function(){t.initScript()})),"complete"===document.readyState&&this.initScript()}},{key:"render",value:function(){return null}}]),n}(s.Component),_=Object(g.b)((function(t){return{userId:O()(t,"desktop.app.customer.id")}}))(I),k=u.a.createElement;function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var o=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var D=function(t){Object(i.a)(n,t);var e=S(n);function n(){var t;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).state={ready:!1},t.trackityIndentify=function(){var e=t.props.customer,n=e.email,r=e.id;n&&r&&Object(f.a)({email:n,id:r})},t.initialGA=function(){Object(l.a)(),Object(l.c)(),t.props.logPageView&&Object(l.b)(),Object(y.o)()},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.interval=setInterval((function(){"complete"===window.document.readyState&&(setTimeout((function(){t.setState({ready:!0}),t.initialGA(),function(){try{window.fbAsyncInit=function(){var t;FB.init({appId:"220558114759707",autoLogAppEvents:!0,xfbml:!0,version:"v3.1"}),null!==(t=window)&&void 0!==t&&t.FBSDK&&(window.FBSDK.map((function(t){return t()})),window.FBSDK={},window.FBSDK.push=function(t){return t()})},function(t,e,n){var r,o=t.getElementsByTagName(e)[0];t.getElementById(n)||((r=t.createElement(e)).id=n,r.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(r,o))}(document,"script","facebook-jssdk")}catch(t){console.log("FACEBOOK",t)}}(),Object(p.a)(),Object(v.a)().then(b.a,b.a),Object(m.a)(),t.props.customer&&(Object(p.b)(t.props.customer,t.props.route),Object(m.b)({userId:t.props.customer}),t.trackityIndentify())}),3e3),t.interval&&clearInterval(t.interval))}),100)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(t){var e;!t.customer&&this.props.customer&&(Object(p.b)(this.props.customer,this.props.route),this.trackityIndentify(),Object(d.b)(null===(e=this.props.customer)||void 0===e?void 0:e.id))}},{key:"render",value:function(){return this.state.ready?k(_,null):null}}]),n}(u.a.Component)}}]);